1. 如果您的项目后端有一个带有各种解析器的 Node.js GraphQL 端点，并且如果您将其部署在生产环境中，则需要通过***速率和深度限制***来保护您的 GraphQL API 端点。

   如果超过每次请求的设定限制，速率限制可帮助您限制用户，
   
   深度限制可帮助您通过深度限制 GraphQL 查询的复杂性。
   
   这些措施可帮助您的应用防止 API 垃圾邮件和查询攻击

   

2. 什么是限速？

   速率限制意味着限制应用程序或用户在给定时间内可以进行的 API 调用次数。

   ***我们希望防止客户能够影响其他客户的体验，或者只是避免被删除。除其他外，由于请求量过多、请求过于昂贵或同时请求过多，可能会发生这种情况***
   
   如果超过此限制，则可能会限制用户或客户端，即禁止客户端在同一时间段内进行更多类似的 API 调用

   > 为什么要限制 API？

      您的后端服务器通常会对在一个时间范围内可以处理的请求数量有一些限制。很多时候，有恶意的用户会用垃圾邮件轰炸您的 API 端点，这会减慢您的服务器速度，甚至可能使其崩溃。

      为了保护您的 API 端点和服务器不至于不堪重负，您必须对 API 端点进行速率限制，无论是 REST API 还是 GraphQL 端点。

    > 限速方法

    * 按每个时间段的 IP 地址
        
        您可以限制某些 IP 地址，并且如果它们在某个时间范围内超过 API 请求的数量，则可以限制它们对您的服务的访问。

    * 按用户 pe 时间范围

        您可以限制您的应用程序中的某些用户（通过他们在数据库中的唯一标识符）并限制他们在一段时间内超过 API 请求数时访问您的服务
    
    * 按时间范围内的 IP 地址和用户

        在这种方法中，如果用户超过您设置的速率限制，您会根据他们是否使用相同的 IP 地址来限制用户。

3. 所有 GraphQL 解析器的统一速率限制

    当服务器上的 GraphQL 解析器（mutation、Query和订阅）具有相同的速率限制时执行此操作，例如每个用户每分钟 10 个请求。

4. 每个 GraphQL 解析器的速率限制规则不同(每个resolver 解析器函数)都有自己的限制规则

    有时每个 GraphQL 解析器都有不同的速率限制规则。
    
    例如，与易于处理且耗时较少的解析器相比，需要大量内存和处理能力的解析器将具有更严格的速率限制。

5. 存储限速数据

    要限制 API 或 GraphQL 端点的速率，您需要跟踪时间、用户 ID、IP 地址和/或其他唯一标识符，并且您还需要存储标识符上次请求端点的数据以计算标识符是否超过了速率限制。

    Redis是最适合这些用例的数据库。这是一个缓存数据库，您可以在其中以密钥对的形式保存少量信息，而且速度非常快。